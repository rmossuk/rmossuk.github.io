<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="EmberData - What happens when you commit ? : Deep dive into the EmberData commit process" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>EmberData - What happens when you commit ?</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/rmossuk">View on GitHub</a>

          <h1 id="project_title">EmberData - What happens when you commit ?</h1>
          <h2 id="project_tagline">Deep dive into the EmberData commit process</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>I have this simple one to many relationship.</p>

<pre><code>App.Product = DS.Model.extend 
  name: DS.attr('string')
  children: DS.hasMany('App.BuildingBlocks')

App.BuildingBlock = DS.Model.extend 
  name: DS.attr('string')
  parent: DS.belongsTo('App.Product')
</code></pre>

<p>I have created and product prior to this so now have access to App.product.</p>

<p>I now want to add a building block to this product, so i have done</p>

<pre><code>newBuildingBlock = App.product.get("children").createRecord()
newBuildingBlock.set("parent", App.product)
</code></pre>

<p>I now want to commit this to my server via the RestAdapter, so i do </p>

<pre><code>App.store.commit()
</code></pre>

<p>This magically saves this of to my server and but what actually happens ?</p>

<p>Lets follow it through the process.</p>

<h3>DS.Store</h3>

<p>Within DS.Store the commit method just delegates to the stores defaultTransaction's commit method.</p>

<p>With EmberData you can create multiple transactions and add specific creates, changes and deletes to any transaction.  Doing this allows you to group related changes together and commit just those changes or roll back the changes.</p>

<p>If you do not create a DS.Transaction and add changes to it, EmberData with use the 'defaultTransaction' and add all changes to this global transaction.  This mean that when you commit, all changes with be saved.</p>

<h3>DS.Transaction</h3>

<p>Within DS.Transaction we get the store, the stores adapter and the stores defaultTransaction to use.  Then we get the stores 'relationships'.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
